
# 自习室预约系统 - 微信小程序

## 项目简介

基于Taro + React开发的自习室预约小程序，采用iOS设计风格，为高校学生提供自习室座位预约服务。系统支持学生查看自习室状态、在线选座预约、签到使用，并为管理员提供完整的管理后台。

## 核心功能

### 学生端

- **浏览自习室**: 查看不同自习室的位置、容量及实时可用座位
- **可视化选座**: 交互式座位图，直观选择心仪座位
- **预约管理**: 查看、取消个人预约，支持座位预约状态追踪
- **签到系统**: 提供扫码签到，支持位置验证

### 管理员端

- **数据仪表盘**: 统计用户数、预约量、签到率及座位利用率
- **用户管理**: 查看用户信息，控制账号状态
- **预约审核**: 查看、确认、取消预约，支持批量操作
- **签到监管**: 处理异常签到，手动确认签到状态
- **系统配置**: 设置预约规则及时段管理(开发中)

## 技术架构

- 前端框架: Taro 3.6.24 / React 18
- 状态管理: Zustand 4.5.0
- 样式处理: SCSS
- 工具库: date-fns 2.30.0
- 开发语言: TypeScript 4.x

## 快速开始

### 环境准备

- Node.js 14.0+
- 微信开发者工具 1.06+

### 安装与运行

```bash
# 安装依赖
npm install

# 开发模式
npm run dev:weapp

# 生产构建
npm run build:weapp
```

使用微信开发者工具打开 `dist`目录预览项目。

## 项目结构

```
taro-wx/
├── src/                 # 源代码目录
│   ├── assets/          # 静态资源(图片、图标)
│   ├── components/      # 公共组件
│   ├── pages/           # 页面组件
│   │   ├── index/       # 首页
│   │   ├── rooms/       # 自习室列表与详情
│   │   ├── reserve/     # 预约页面
│   │   ├── profile/     # 个人中心
│   │   └── admin/       # 管理员页面
│   ├── store/           # 状态管理
│   └── app.tsx          # 应用入口
└── config/              # 项目配置
```

## 权限系统说明

系统包含三种角色:

- **学生**: 浏览自习室、预约座位、管理个人预约、签到
- **管理员**: 完整的管理权限，可执行所有操作
- **管理者**: 查看权限，无修改权限

## 开发模式测试指南

由于微信环境限制，可使用以下方法模拟登录与权限:

```javascript
// 在开发者工具控制台执行
wx.setStorageSync('userInfo', JSON.stringify({
  nickName: "测试管理员",
  avatarUrl: "",
  studentId: "S12345678",
  gender: 1,
  role: "admin"  // admin/manager/student
}));
wx.setStorageSync('token', 'mock-token-' + Date.now());
```

执行后刷新页面，通过"我的"页面进入管理控制台。

## 常见问题

1. **无法看到管理员入口?**

   - 确认已正确设置userInfo中role为"admin"
   - 检查Storage中token是否存在
   - 刷新页面并重新进入"我的"页面
2. **微信登录失败?**

   - 开发环境下请使用上述模拟登录方式
   - 确保AppID配置正确
3. **图标显示异常?**

   - 确认assets目录下相关资源已正确导入

## 最近更新

- 完善管理员仪表盘，新增数据统计指标
- 优化预约管理界面，支持批量操作
- 添加预约详情模态框，提升操作效率
- 改进筛选系统，支持多条件组合筛选
- 全面采用iOS设计风格，提升用户体验

## 后续规划

- 数据分析模块开发，提供图表可视化
- 系统设置界面实现，支持参数配置
- 座位布局编辑器，灵活定义空间布局
- 用户信用评分系统，规范预约行为
- 消息通知功能，预约提醒与到期提醒

---

**开发团队**: 华中师范大学自习室预约项目组
**更新日期**: 2025年3月31日
